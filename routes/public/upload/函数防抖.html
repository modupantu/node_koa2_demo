<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <div id="dd" style="width: 200px;height:300px;background:red;"></div>
  <script>
    var count = 1;
    var con = document.getElementById('dd')
    // con.onmousemove = ddfun(getUserAction, 1000, false)
    con.onmousemove = throttle(getUserAction, 1000)
    /**
     *
     * @param func 回调函数
     * @param wait 延迟时间
     * @param flag 设置防抖先防抖 false 还是后防抖 true
     */
    // function ddfun(func, wait, flag) {
    //   var timeout = null;
    //   return function () {
    //     clearTimeout(timeout)
    //     if (flag) {
    //       var callNow = !timeout;
    //       timeout = setTimeout(function () {
    //         timeout = null
    //       }, wait)
    //       if (callNow) {
    //         func.bind(con)()
    //       }
    //     } else {
    //       timeout = setTimeout(function () {
    //         func.bind(con)()
    //       }.bind(con), wait)
    //     }
    //   }
    // }











    function getUserAction() {
      this.innerHTML = count++
    }

    /* 节流 
     *  有次序去执行---》 定时器
     * @param 
     * 
     */

    function throttle(func, wait) {
      var previous = 0;
      return function () {
        var self = this;
        var now = +new Date();
        if (now - previous > wait) {
          func.bind(self)()
          previous = now;
        }
      }
    }
  </script>
</body>

</html>